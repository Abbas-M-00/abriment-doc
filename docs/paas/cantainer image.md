---
slug: /paas/cantainerimage
sidebar_position: 2
---

#  کانتینر ایمیج

کانتینر ابری (Cloud Container) یک محیط توسعه و استقرار کامل اپلیکیشن‌ها در محیط ابری است. شما می‌توانید به کمک Cloud Container، از برنامه‌های ساده مبتنی بر ابر تا برنامه‌های کاربردی سازمانی پیچیده را بر بستر ابری ارائه دهید. Cloud Container برای پشتیبانی از چرخه عمر کامل برنامه وب طراحی شده است:
 ساخت، آزمایش، استقرار، مدیریت و به‌روز‌رسانی.

سرویس Cloud Container به شما امکان می‌دهد از هزینه و پیچیدگی خرید و مدیریت مجوزهای نرم‌افزار، زیرساخت‌های برنامه کاربردی و میان‌افزار، سازمان‌دهندگان کانتینر مانند کوبرنتیز یا ابزارهای توسعه و سایر منابع جلوگیری کنید. شما برنامه‌ها و سرویس‌هایی را که توسعه می‌دهید مدیریت می‌کنید، و ارائه‌دهنده خدمات ابری معمولاً چیزهای دیگر را مدیریت می‌کند.

پس از ورود به صفحه کانتینر با صفحه پیشخوان مواجه می‌شوید:

![paas_projects_list](/img/container/paas_projects_list.png)

### ساخت پروژه
از طریق منو کنار می‌توانید وارد صفحه پروژه‌های من شوید:

![paas-3.png](/img/container/paas-3.png)

با کلیک بر روی **ایجاد پروژه** می‌توانید پروژه جدید بسازید و در آن به ساخت اپلیکیشن خود بپردازید. 

:::info نکته
در نام پروژه از کاراکترهای خاص (!_=+/@#$%^&*) استفاده نکنید!
تنها استفاده از کاراکتر خط تیره "-" مجاز است.
:::

![paas-4.png](/img/container/paas-4.png)

پس از انتخاب نام برای پروژه خود که در واقع namespace مربوطه در Kubernetes است، می‌توانیم برای ساخت اپلیکیشن خود اقدام کنیم. با کلیک بر روی **اپلیکیشن‌های من** از منو کناری وارد صفحه مربوطه می‌شوید و لیست اپلیکیشن‌های خود را می‌توانید مشاهده کنید:

![paas-6.png](/img/container/paas-6.png)     

در این صفحه مواردی را می‌بینیم که جداگانه در ادامه توضیح داده می‌شود.
در قسمت بالا سمت چپ می‌توانیم لیست پروژه‌های خود را ملاحظه بفرمایید و بین پروژه‌ها جا‌به‌جا شوید.

### ساخت اپلیکیشن

![paas-7.png](/img/container/paas-7.png)  

با کلیک بر روی **ایجاد اپلیکیشن** در صفحه اپلیکیشن‌های من، جهت ساخت اپلیکیشن کانتینر ایمیج  را انتخاب کنید:

![paas-10.png](/img/container/paas-10.png)

در کانتینر ایمیج شما می‌توانید ایمیج، فایل پیکربندی، سکرت، متغیرهای محلی و تمام موارد مورد نیاز برای راه‌اندازی اپلیکیشن خود را انتخاب کنید.
در سرویس کاتالوگ نرم افزارهای آماده‌ای برای شما لیست شده است و می‌توانید آن‌ها را انتخاب کنید و در این مورد میزان باز بودن دست شما برای تغییر کمتر است و برای افرادی مناسب است که آشنایی زیادی نداشته باشند و صرفا راه اندازی ساده نرم افزار مدنظرشان باشد.

## 1-مشخصات
در صفحه کانتینر ایمیج شما با موارد زیر رو به روی می‌شوید:

![paas-11.png](/img/container/paas-11.png)

نام اپلیکیشن در واقع name است که در قسمت metadata زده می‌شود و به صورت ساده تر به نوعی نام اپلیکیشن شما را تعیین می‌کند.
در نوع اپلیکیشن، دو نوع وجود دارد که در
[تفاوت Deployment و StatefulSet در کوبرنتیز](https://virgool.io/Abriment/%D8%AA%D9%81%D8%A7%D9%88%D8%AA-deployment-%D9%88-statefulset-%D8%AF%D8%B1-%DA%A9%D9%88%D8%A8%D8%B1%D9%86%D8%AA%DB%8C%D8%B3-wql4aiea1e97)
 میتوانید تفاوت آن‌ها را متوجه شوید.
همچنین تعداد پادهایی که نیاز دارید را می‌توانید با تعداد رپلیکا مشخص کنید. برای مواردی که می‌خواهید کلاستر داشته باشید و HA داشته باشید و یا برای مواردی مثل شاردینگ و Horizontal Scaling مورد استفاده می‌تواند قرار بگیرد.

![paas-12.png](/img/container/paas-12.png)

در قسمت مشخصات ایمیج شما آدرس رجیستری و اسم ایمیج و تگ مربوط به آن را وارد می‌کنید و اگر ایمیج شما عمومی نباشد و خصوصی باشد باید ابتدا سکرتی را بسازید و بعد در این صفحه به آن ارجاع دهید که **ساختن سکرت** را در ادامه به آن خواهیم پرداخت. با فعال کردن ایمیج اختصاصی شما نیاز دارید سکرت مورد نظرتان را انتخاب کنید که به صورت اتوماتیک نام کاربری و رمز عبور رجیستری خارجی جاگذاری می شود.

![paas-13.png](/img/container/paas-13.png)

در ادامه شما باید منابع مورد نیاز برای اپلیکیشن‌تان را انتخاب کنید:

![paas-14.png](/img/container/paas-14.png)

انتخاب منابع می‌تواند از بسته‌های پیشنهادی ابریمنت باشد یا خودتان بسته دلخواهتان را انتخاب کنید. هسته پردازشی CPU، حافظه تصادفی RAM و حافظه میرا ephemeral Storage است.
برای آنکه دیتا شما با ری استارت شدن پاد یا هر اتفاق غیر منتظره‌ای برای پاد از بین نرود نیاز به دیسک دائمی دارید. در قسمت بعدی می‌توانید اگر نیاز به دیسک دارید انتخاب کنید.


![paas-14.png](/img/container/paas-14.1.png)

درصورت داشتن دیسک می‌توانید از این بخش به دیسک های موجود خود دسترسی داشته باشید.
همچنین درصورتی که برای اولین بار نیاز به دیسک دائمی داشتید از این بخش اقدام نمایید.
برای هر دیسک باید مشخص کنیم که به چه مسیری persist شود.


![paas-14.png](/img/container/paas-14.2.png)


![paas-14.png](/img/container/paas-14.3.png)

:::info نکته
هر پروژه مربوط به کاربر محدودیتی از لحاظ منابع دارد که همان resource quota مربوط به namespace است.
:::

در مرحله بعدی شما می‌توانید تنظیمات و پیکربندی‌های مربوط به اپلیکیشن خودتان را انجام دهید:

## 2-تنظیمات
### تنظیمات پیکربندی
### 1. متغیر‌های محلی (Environment Variable)


![paas-16.png](/img/container/paas-16.png)

متغیرهای محلی می‌توانند به سه روش ست شوند:

- **Value**: به صورت key-value مشخص می‌شوند.

- **From configMap**: با انتخاب مقدار پارامتر از configMap، می‌توانید همه پارامترها را در یک مکان متمرکز کنید. این کار به شما امکان می‌دهد تا مقادیر را به راحتی تغییر دهید و تغییرات در تمامی اپلیکیشن‌هایی که از آن configMap استفاده می‌کنند، اعمال شود.

- **Secret**: با استفاده از مقادیر ذخیره‌شده در Secret، می‌توانید اطلاعات حساسی مانند پسوردها را به صورت base64 مخفی کنید و به آن‌ها ارجاع دهید. این روش برای جلوگیری از نمایش مستقیم مقادیر حساس کاربردی است.

### 2. فایل های پیکربندی

- **ConfigMap**:

در این قسمت می‌توانید از کانفیگ های قبلی خود استفاده نمایید، همچنین با ساخت هر پروژه یک کانفیگ بصورت پیش فرض ساخته می‌شود.

![paas-18.png](/img/container/paas-19.png)


 یا
درصورت نیازمندی به ساخت کانفیگ جدیدمی‌توانید از منو سمت راست بخش "**کانفیگ مپ‌ها**" 
برای ساخت کانفیگ مورد نظر اقدام نمایید.

می‌توانید با کلیک بر روی اضافه کردن مقادیر، کلید اضافه کنید و در یک configMap چند کلید داشته باشید و به کلید و مقادیر متناظر مختلف ارجاع دهید.


![paas-19.png](/img/container/paas-20.png)



- **Secret File**:
درصورت خصوصی بودن یک ایمیج می‌توانید از این بخش نسبت به انتخاب و  "**سکرت**" مورد نظر اقدام نمایید.

![paas-20.png](/img/container/paas-21.png)

Secret‌ها انواع مختلفی دارند:

![paas-21.png](/img/container/paas-22.png)

    - Key/Value
    - Image Pull Secret
    - Basic Authntication
    - SSH Authentication

###  تنظیمات شبکه
#### 1. زیردامنه
   برای استفاده از دامنه رایگان، مسیر و نام مورد نظر خود را وارد کنید. توجه داشته باشید که زیردامنه نهایی با **abriment.com** خواهد بود. این زیردامنه برای اپلیکیشن‌هایی با UI که روی یک پورت راه‌اندازی می‌شوند، کاربرد دارد. برای دسترسی به آن، از زیردامنه رایگان استفاده کرده و آدرس دامنه و پورت اپلیکیشن را ارائه می‌دهید. در واقع، زیردامنه رایگان همان Ingress در کوبرنتیز است.

![paas-20.png](/img/container/paas-23.1.png)

#### 2.سرویس‌ها

سرویس‌ها در واقع برای expose کردن یک پورت و ارتباط با اپلیکیشن در درون ابریمنت است. سرویس Headless هم برای دسترسی که یک پاد پشت StatefulSet یا Deployment است در صورتی که سرویس عادی درخواست را بین پادها Load Balance می‌کند.

![paas-21.png](/img/container/paas-24.png)    

![paas-20.png](/img/container/paas-23.png)


## 3- بررسی YAML
در قسمت بعدی در واقع yaml فایل ساخته شده با اطلاعات‌تان را می‌توایند مشاهده کنید و آن را تغییر دهید. در واقع این yaml فایل به شما قابلیت اضافه کردن موارد مورد نیازتان و تغییر را می‌دهد و در واقع مانیفست کوبرنتیز است و حتی می‌توانید این yaml را کپی کنید در کلاستر دیگر کوبرنتیزی استفاده کنید.

![paas-22.png](/img/container/paas-25.png)   

## 4- پیش فاکتور
در این بخش فاکتور اپلیکشن مورد نظر خود را مشاهده می‌کنید.

![paas-22.png](/img/container/paas-25.1.png)   
بعد از ساخته شدن اپلیکیشن، می‌توانید اطلاعات مربوط به آن را مشاهده کنید :

![paas-23.png](/img/container/paas-26.png)   



همچنین با انتخاب بخش عملیات می‌توانید اپلیکیشن خود را **راه‌اندازی مجدد** (Restart) ،  **خاموش شدن** (replica=0)  و یا **حذف** (delete) کنید.

![paas-24.png](/img/container/paas-27.png) 

همچنین در این صفحه مجموع منابع مصرف شده و محدودیت‌ها را می‌توانید ملاحظه بفرمایید:

![paas-25.png](/img/container/paas-28.png) 
