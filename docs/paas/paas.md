---
slug: /paas
sidebar_position: 3
---

# راهنمای بخش کانتینر ابری

پس از ورود به صفحه کانتینر با صفحه پیشخوان مواجه می‌شوید:

![paas_projects_list](/img/container/paas_projects_list.png)

### ساخت پروژه
از طریق منو کنار می‌توانید وارد صفحه پروژه‌های من شوید:

![paas-3.png](/img/container/paas-3.png)

با کلیک بر روی **ایجاد پروژه** می‌توانید پروژه جدید بسازید و در آن به ساخت اپلیکیشن خود بپردازید. 

:::info نکته
در نام پروژه از کاراکترهای خاص (!_=+/@#$%^&*) استفاده نکنید!
تنها استفاده از کاراکتر خط تیره "-" مجاز است.
:::

![paas-4.png](/img/container/paas-4.png)

پس از انتخاب نام برای پروژه خود که در واقع namespace مربوطه در Kubernetes است، می‌توانیم برای ساخت اپلیکیشن خود اقدام کنیم. با کلیک بر روی **اپلیکیشن‌های من** از منو کناری وارد صفحه مربوطه می‌شوید و لیست اپلیکیشن‌های خود را می‌توانید مشاهده کنید:

![paas-6.png](/img/container/paas-6.png)     

در این صفحه مواردی را می‌بینیم که جداگانه در ادامه توضیح داده می‌شود.
در قسمت بالا سمت چپ می‌توانیم لیست پروژه‌های خود را ملاحظه بفرمایید و بین پروژه‌ها جا‌به‌جا شوید.

### ساخت اپلیکیشن

![paas-7.png](/img/container/paas-7.png)  

با کلیک بر روی **ایجاد اپلیکیشن** در صفحه اپلیکیشن‌های من، جهت ساخت اپلیکیشن انتخاب‌های زیر را دارید:

![paas-10.png](/img/container/paas-10.png)

انتخاب منابع می‌تواند از بسته‌های پیشنهادی ابریمنت باشد یا خودتان بسته دلخواهتان را انتخاب کنید. هسته پردازشی CPU، حافظه تصادفی RAM و حافظه میرا ephemeral Storage است.
برای آنکه دیتا شما با ری استارت شدن پاد یا هر اتفاق غیر منتظره‌ای برای پاد از بین نرود نیاز به دیسک دائمی دارید. در قسمت بعدی می‌توانید اگر نیاز به دیسک دارید انتخاب کنید. سه نوع دیسک وجود دارد:

1. `SSD`
2. `HDD`
3. `HDD with SSD cache`

همچنین دو نوع حالت دسترسی وجود دارد:

1. `Read Write Once (RWO)`:

 دیسک فقط به یک پاد persist می‌شود و فقط یک پاد به آن دیسک دسترسی دارد. به عنوان مثال کافکا چون دیتاها نیاز نیست یکسان باشد به ازای هر پاد یک دیسک می‌خواهیم که این حالت دسترسی مناسب است.

2. `Read Write Many (RWX)`: 

یک دیسک می‌تواند در اختیار چند پاد قرار بگیرد و در واقع داده‌ها در مسیر مشخص شده در هر پاد یکسان است. به عنوان مثال گرافانا را اگر در حالت deployment راه اندازی کنیم و بخواهیم اگر برای یک پاد اتفاقی افتاد downtime نداشته باشیم باید دیسک را در حالت RWX قرار دهیم که پاد جدید بالا بیاید و از داده آن دیسک بتواند استفاده کند.


## 2-تنظیمات
### تنظیمات پیکربندی
### 1. متغیر‌های محلی (Environment Variable)


![paas-16.png](/img/container/paas-16.png)

متغیر‌های محلی از سه حالت می‌توانند ست شوند:

- **Value**:
به صورت key-value داده می‌شود.

- **From configMap**: 
پارامتری را که در configmap ست کرده‌اید را value آن را به عنوان مقدار env مربوطه انتخاب می‌کنید. در مواردی کاربردی است که پارامتر‌ها بخواهید همه را در یک کانفیگ مپ قرار دهید و مقادیر را در صورت نیاز در کانفیگ مپ تغییر دهید و اگر چند اپلیکیشن از آن کانفیگ مپ استفاده کنند در همه آن‌ها تغییرات اعمال خواهد شد.

- **Secret**:
پارامتری را که در سکرت ست کرده‌اید را value آن را به عنوان مقدار env مربوطه انتخاب می‌کنید. در مواردی کاربردی است که نخواهیم مستقیما مقدار قابل دیدن باشد و آن را به صورت base64 در سکرت قرار می‌دهیم و به آن ارجاع می‌دهیم. مثلا پسوورد.

### 2. فایل های پیکربندی

- **ConfigMap**

در مواردی کاربر دارد که شما config file اپلیکیشن‌تان را در کانفیگ مپ قرار دهید و آن را از این طریق به درون اپلیکیشن و در مسیر مربوطه قرار دهید.
در این قسمت شما یا از قبل کانفیگ مپ مربوطه را ساختید از طریق صفحه مجزا مربوط به کانفیگ مپ در سمت راست صفحه و زیر اپلیکیشن‌های من و به آن در مراحل ساخت ارجاع می‌دهید.

![paas-16.png](/img/container/paas-17.png)

یا قبلا نساخته‌اید و در همین مراحل ساخت می‌خواهید آن را بسازید که در تصاویر روند آن را ملاحظه می‌کنید: 

![paas-18.png](/img/container/paas-19.png)

![paas-19.png](/img/container/paas-20.png)

می‌توانید با کلیک بر روی اضافه کردن مقادیر، کلید اضافه کنید و در یک configMap چند کلید داشته باشید و به کلید و مقادیر متناظر مختلف ارجاع دهید.

- **Secret File**

این مورد هم مانند کانفیگ مپ است اما کاربر آن همانطور که در قبل هم اشاره کردیم برای آن است که نخواهیم مستقیما مقدار قابل دیدن باشد و آن را به صورت base64 در سکرت قرار می‌دهیم و به آن ارجاع می‌دهیم. 

![paas-20.png](/img/container/paas-21.png)

Secret‌ها انواع مختلفی دارند:

![paas-21.png](/img/container/paas-22.png)

    - Key/Value
    - Image Pull Secret
    - Basic Authntication
    - SSH Authentication

###  تنظیمات شبکه
#### 1. زیردامنه
   
برای استفاده از دامنه رایگان از این قسمت مسیر قرارگیری و نام مورد نظر خود را وارد نمایید، توجه داشته باشید، زیردامنه نهایی با (**abriment.com**)
قسمت زیردامنه رایگان در واقع برای مواردی است که اپلیکیشن شما UI دارد و روی یک پورتی راه اندازی می‌شود. برای دسترسی به آن از بیرون از زیردامنه رایگان استفاده می‌کنید و آدرس دامنه و پورت اپلیکشن که بر روی آن UI دارد را می‌دهید. زیردامنه رایگان در واقع همان Ingress در کوبرنتیز است.
![paas-20.png](/img/container/paas-23.1.png)

#### 2.سرویس‌ها

سرویس‌ها در واقع برای expose کردن یک پورت و ارتباط با اپلیکیشن در درون ابریمنت است. سرویس Headless هم برای دسترسی که یک پاد پشت StatefulSet یا Deployment است در صورتی که سرویس عادی درخواست را بین پادها Load Balance می‌کند.

![paas-21.png](/img/container/paas-24.png)    

![paas-20.png](/img/container/paas-23.png)


همچنین با انتخاب بخش عملیات می‌توانید اپلیکیشن خود را **راه‌اندازی مجدد** (Restart) ،  **خاموش شدن** (replica=0)  و یا **حذف** (delete) کنید.

![paas-24.png](/img/container/paas-27.png) 

همچنین در این صفحه مجموع منابع مصرف شده و محدودیت‌ها را می‌توانید ملاحظه بفرمایید:

![paas-25.png](/img/container/paas-28.png) 


## رخدادها

آیکون زنگوله بالا، نشان دهنده لاگ‌های موجود در هنگام راه‌اندازی اپلیکیشن است که در واقع event‌های مخصوص به پروژه یا همان namespace شما بر روی کوبرنتیز است.

![paas-8.png](/img/container/paas-8.png)

## دیسک های دائمی

برای استفاده از دیسک های دائمی(persistentDisks) می‌توانید از بخش زیر اقدام نمایید:

![paas.png](/img/container/persistentdisks1.png)

در این قسمت نام دیسک، اندازه و نوع دیسک که شامل (SSD, HDD, HDD with SSD cache) را مشاهده می‌کنید.

همچنین حالت دسترسی به دیسک را می‌توان انتخاب نمود، که به بررسی هر 2 نوع دسترسی می‌پردازیم


همچنین دو نوع حالت دسترسی وجود دارد:

1. **RWO (Read-Write-Only)**
RWO به معنای "فقط خواندن و نوشتن" است. در این حالت، یک کاربر یا سیستم می‌تواند داده‌ها را بخواند و همچنین می‌تواند تغییرات را روی آن‌ها اعمال کند. این نوع دسترسی معمولاً برای منابعی که به تغییرات نیاز دارند، استفاده می‌شود و در بسیاری از محیط‌های کاری و ذخیره‌سازی داده‌ها رایج است.

2. **RWM (Read-Write-Multiple)**
RWM به معنای "خواندن و نوشتن چندگانه" است. در این حالت، امکان خواندن و نوشتن به طور همزمان توسط چندین کاربر یا سیستم وجود دارد. RWM معمولاً در محیط‌های چندکاربره یا در سرورهای پایگاه داده‌ای استفاده می‌شود که در آن نیاز به دسترسی چندین کاربر به داده‌ها به صورت همزمان وجود دارد. این نوع دسترسی به بهینه‌سازی استفاده از منابع و کارایی سیستم کمک می‌کند.


:::tip 
به زبان دیگر، درصورت انتخاب rwoشما فقط یک دیسک به بخش file browserتخصیص داده اید و قادر به استفاده از این دیسک بصورت همزمان درجای دیگر نمی‌باشید.

اما در صورت انتخاب rwm می‌توانید دیسک خود را بصورت همزمان هم در قسمت file browser و هم برای مثال ساخت کانتینر ایمیج بکار ببرید.
:::

 ![paas.png](/img/container/persistentdisks2.png)

پس از تایید ساخت دیسک از قسمت "**فعال کردن**" مرورگرفایل خود را فعال نمایید.

 ![paas.png](/img/container/persistentdisks3.png)


 درصورتی که یک دیسک بصورت rwoانتخاب شود و در سرویس دیگر انتخاب گردد ، امکان اتصال به مرورگر فایل نمی‌باشد.
 (در تصویر زیر دیسک دوم قابل اتصال نیست.)

 ![paas.png](/img/container/persistentdisks4.png)


با انتخاب "**رفتن به مرورگر فایل**" صفحه زیر مشاهده می‌شود.
برای لاگین کردن نام کاربری و رمز موجود را انتخاب نمایید.

 ![paas.png](/img/container/persistentdisks5.png)

پس از این دشبورد مرورگر فایل را مشاهده خواهید کرد.

 ![paas.png](/img/container/persistentdisks6.png)




 

## لاگ
 
لاگ اپلیکیشن خود را می‌توانید با ورود به تب سمت راست صفحه مشاهده کنید پس از کلیک بر روی لاگ اپلیکیشن وارد صفحه زیر می‌شوید:

![paas-27.png](/img/container/paas-30.png) 

همچنین می‌توانید فیلتر‌های زمانی و سرچ روی آن بزنید:

![paas-28.png](/img/container/paas-31.png) 

## مانیتورینگ

در قسمت مانتورینگ دو بخش وجود دارد:

1. داشبورد
متریک‌هایی که در داشبورد مانیتور شده و به کاربر ارائه می‌شوند در ادامه خواهد آمد:
اطلاعات در سطح پروژه:

- مموری مصرف شده (به صورت درصدی gauge)

- پردازنده مصرف شده (به صورت درصدی gauge)

- فضای ذخیره سازی مصرف شده (به صورت درصدی gauge)

- تعداد پادها

- تعداد پادهای در حال اجرا


#### اطلاعات در سطح پاد:


**مموری مصرف شده پاد** :
(به صورت مقدار مصرف، درصد نسبت به منابع انتخابی کاربر، حداقل و حداکثر و میانه مصرف) 

**پردازنده مصرف شده**:
  (به صورت مقدار مصرف، درصد نسبت به منابع انتخابی کاربر، حداقل و حداکثر و میانه مصرف)

**فضای ذخیره سازی پاد**:
(
به صورت مقدار مصرف، درصد نسبت به منابع انتخابی کاربر، حداقل و حداکثر و میانه
 مصرف)

**ورودی/خروجی شبکه پاد**:
  (  به صورت مقدار مصرف، حداقل و حداکثر و میانه مصرف
)


در این قسمت نیز شما توانایی انتخاب پروژه و فیلتر کردن و انتخاب پاد‌ها را دارید همچنین فیلتر زمانی و امکان فعال سازی به روز رسانی خودکار هم دارید.
<!-- 

2. کوئری سفارشی    

در این قسمت اگر شما متریکی را برای پروژه‌تان نیاز دارید که در داشبورد مانیتورینگ ارائه شده ما نبود می‌توانید در قسمت کوئری سفارسی کوئری PromQL آن را وارد کنید و به صورت Histogram مقادیر را ملاحظه کنید.

![paas-29.png](/img/container/paas-32.png)   
-->